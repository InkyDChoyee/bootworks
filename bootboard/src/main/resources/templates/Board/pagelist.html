<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>BOARD</title>
<link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
	<div id="container">
		<a th:href="@{/board/pagelist}"><h2 class="h2">Board</h2></a>
		<!-- 검색 영역 -->
		<form class="frm_search" th:action="@{/board/pagelist}" method="get">  <!-- 자기 자신에게 보내줌 -->
		    <select name="type">
		    	<option th:value="title" th:text="Title" th:selected="${type =='title'}"></option>
		    	<option th:value="content" th:text="Content" th:selected="${type=='content'}"></option>
		    </select>
		    <input type="text" name="keyword" th:value="${kw}">
		    <input type="submit" value="Search">
		</form>
		<!-- 글 목록 -->
		<table class="tbl_list">
			<thead>
				<tr>
					<th>No</th>
					<th>Title</th>
					<th>Writer</th>
					<th>Date</th>
					<th>Hits</th>
				</tr>
			</thead>
			<tbody>
 				<tr th:each="board: ${boardList}">
					<td th:text="${board.id}"></td>
					<!-- page 클래스의 메서드인 number - getNumber() -->
					<td><a th:href="@{|/board/${board.id}|(page=${boardList.number+1})}" th:text="${board.boardTitle}"></a></td>
					<td th:text="${board.boardWriter}"></td>
					<td th:if="${board.updatedDate != empty}" th:text="${#temporals.format(board.updatedDate, 'yyyy-MM-dd HH:mm:ss')} + ' (updated)'"></td>
					<td th:unless="${board.updatedDate != empty}" th:text="${#temporals.format(board.createdDate, 'yyyy-MM-dd HH:mm:ss')} + ' (created)'"></td>
					<td th:text="${board.boardHits}"></td>
				</tr>
			</tbody>
		</table>
		<!-- 페이지 영역 -->
		<div class="pagination">
			<!-- 이전 페이지 -->
			<!-- 2Page 클릭하면 db 페이지는 1page -->
			<a th:href="${boardList.first}? '#' : @{/board/pagelist(page=${boardList.number})}">Prev</a>
			<!-- 페이지 번호 블럭 -->
			<span th:each="page: ${#numbers.sequence(startPage,endPage)}">
				<!-- <span th:text="${page}"></span> -->
				<!-- /pagelist?page=1 -->
				<!-- 현재 페이지는 링크없이숫자만 표시 -->
				<span id="current_page" th:if="${page == boardList.number + 1}" th:text="${page}"></span>
				<span th:if="${page != boardList.number + 1}" >
					<a th:href="@{/board/pagelist(page=${page})}" th:text="${page}"></a>
				</span>
			</span>
			<!-- 다음 페이지 -->
			<a th:href="${boardList.last}? '#' : @{/board/pagelist(page=${boardList.number+2})}">Next</a>
		</div>
		
		<!-- 버튼 영역 -->
		<div class="listBtn">
			<a th:href="@{/board/write}"><button class="idx_btn_join">Write</button></a>
			<a th:if="${session.sessionEmail}" th:href="@{/main}"><button class="btn_home" type="button">Home</button></a>
			<a th:unless="${session.sessionEmail}" th:href="@{/}"><button class="btn_home" type="button">Home</button></a>
		</div>
	</div>
</body>
</html>